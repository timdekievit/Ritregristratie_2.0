(this["webpackJsonpclient-app"]=this["webpackJsonpclient-app"]||[]).push([[0],{281:function(e,t,n){},455:function(e,t,n){"use strict";n.r(t),n.d(t,"history",(function(){return Fe}));var r=n(0),i=n(31),a=n.n(i),c=(n(277),n(278),n(279),n(280),n(281),n(473)),s=n(24),o=n(476),d=n(126),u=n(483),l=n(260),j=n(475),b=n(10),h=n(17),p=n(47),O=n(18),g=n.n(O),f=n(43),x=n(11),m=n(457),v=n(69),y=n.n(v),R=n(134),w=function e(t,n){Object(b.a)(this,e),this.data=void 0,this.pagination=void 0,this.data=t,this.pagination=n},S=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;Object(b.a)(this,e),this.pageNumber=void 0,this.pageSize=void 0,this.pageNumber=t,this.pageSize=n};y.a.defaults.baseURL="/api",y.a.interceptors.request.use((function(e){var t=N.commonStore.token;return t&&(e.headers.Authorization="Bearer ".concat(t)),e})),y.a.interceptors.response.use(function(){var e=Object(f.a)(g.a.mark((function e(t){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=3;break;case 3:if(!(n=t.headers.pagination)){e.next=7;break}return t.data=new w(t.data,JSON.parse(n)),e.abrupt("return",t);case 7:return e.abrupt("return",t);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(function(e){var t=e.response,n=t.data,r=t.status,i=t.config;switch(console.log(e.response),r){case 400:if("string"===typeof n&&R.b.error(n),"get"===i.method&&n.errors.hasOwnProperty("id")&&Fe.push("/not-found"),n.errors){var a=[];for(var c in n.errors)n.errors[c]&&a.push(n.errors[c]);throw a.flat()}break;case 401:R.b.error("unauthorised");break;case 404:Fe.push("/not-found");break;case 500:N.commonStore.setServerError(n),Fe.push("/server-error")}return Promise.reject(e)}));var I=function(e){return e.data},k=function(e){return y.a.get(e).then(I)},M=function(e,t){return y.a.post(e,t).then(I)},C=function(e,t){return y.a.put(e,t).then(I)},A=function(e){return y.a.delete(e).then(I)},L={Rides:{list:function(e){return y.a.get("/rides",{params:e}).then(I)},details:function(e){return k("rides/".concat(e))},create:function(e){return M("/rides",e)},update:function(e){return C("/rides/".concat(e.id),e)},delete:function(e){return A("rides/".concat(e))}},Account:{current:function(){return k("/account")},login:function(e){return M("/account/login",e)},register:function(e){return M("/account/register",e)}},GoogleMaps:{apiKey:function(){return k("/googleMaps")}}},P=function(){function e(){var t=this;Object(b.a)(this,e),this.ridesRegistry=new Map,this.selectedRide=void 0,this.apiKey="",this.pagination=null,this.pagingParams=new S,this.orderByRecent=!0,this.predicate=(new Map).set("orderByRecent",!0),this.loading=!1,this.loadingInititial=!0,this.setPagingParams=function(e){t.pagingParams=e},this.setPredicate=function(e){switch(e){case"orderByRecent":t.predicate.set("orderByRecent",!0),t.orderByRecent=!0;break;case"orderByOld":t.predicate.set("orderByRecent",!1),t.orderByRecent=!1}},this.loadApiKey=Object(f.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,L.GoogleMaps.apiKey();case 3:t.apiKey=e.sent,e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])}))),this.setLoadingInitial=function(e){t.loadingInititial=e},this.loadRides=Object(f.a)(g.a.mark((function e(){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loadingInititial=!0,e.prev=1,e.next=4,L.Rides.list(t.axiosParams);case 4:(n=e.sent).data.forEach((function(e){t.setRide(e)})),t.setPagination(n.pagination),t.setLoadingInitial(!1),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0),t.setLoadingInitial(!1);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),this.setPagination=function(e){t.pagination=e},this.loadRide=function(){var e=Object(f.a)(g.a.mark((function e(n){var r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=t.getRide(n))){e.next=6;break}return t.selectedRide=r,e.abrupt("return",r);case 6:return t.loadingInititial=!0,e.prev=7,e.next=10,L.Rides.details(n);case 10:return r=e.sent,t.setRide(r),Object(h.h)((function(){t.selectedRide=r})),t.setLoadingInitial(!1),e.abrupt("return",r);case 17:e.prev=17,e.t0=e.catch(7),console.log(e.t0),t.setLoadingInitial(!1);case 21:case"end":return e.stop()}}),e,null,[[7,17]])})));return function(t){return e.apply(this,arguments)}}(),this.getDistance=function(){var e=Object(f.a)(g.a.mark((function e(t){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(n=new google.maps.DistanceMatrixService).getDistanceMatrix({origins:[t.beginAddress],destinations:[t.destination],travelMode:google.maps.TravelMode.DRIVING,unitSystem:google.maps.UnitSystem.METRIC}),console.log(n);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.setRide=function(e){e.date=new Date(e.date),t.ridesRegistry.set(e.id,e)},this.getRide=function(e){return t.ridesRegistry.get(e)},this.createRide=function(){var e=Object(f.a)(g.a.mark((function e(n){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,L.Rides.create(n);case 3:Object(h.h)((function(){t.ridesRegistry.set(n.id,n),t.selectedRide=n,t.loading=!1})),e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0),Object(h.h)((function(){t.loading=!1}));case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),this.updateRide=function(){var e=Object(f.a)(g.a.mark((function e(n){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.prev=1,e.next=4,L.Rides.update(n);case 4:Object(h.h)((function(){t.ridesRegistry.set(n.id,n),t.selectedRide=n})),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(1),console.log(e.t0),Object(h.h)((function(){t.loading=!1}));case 11:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),this.clearSelectedRide=function(){t.selectedRide=void 0},this.deleteRide=function(){var e=Object(f.a)(g.a.mark((function e(n){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.prev=1,e.next=4,L.Rides.delete(n);case 4:Object(h.h)((function(){t.ridesRegistry.delete(n),t.loading=!1})),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(1),console.log(e.t0),Object(h.h)((function(){t.loading=!1}));case 11:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),Object(h.d)(this),this.loadApiKey(),Object(h.g)((function(){return t.orderByRecent}),(function(){t.pagingParams=new S,t.ridesRegistry.clear(),t.loadRides()}))}return Object(x.a)(e,[{key:"axiosParams",get:function(){var e=new URLSearchParams;return e.append("pageNumber",this.pagingParams.pageNumber.toString()),e.append("pageSize",this.pagingParams.pageSize.toString()),this.predicate.forEach((function(t,n){e.append(n,t)})),e}},{key:"ridesByDate",get:function(){return this.orderByRecent?Array.from(this.ridesRegistry.values()).sort((function(e,t){return t.date.getTime()-e.date.getTime()})):Array.from(this.ridesRegistry.values()).sort((function(e,t){return e.date.getTime()-t.date.getTime()}))}},{key:"groupedRides",get:function(){return Object.entries(this.ridesByDate.reduce((function(e,t){var n=Object(m.default)(t.date,"dd MMM yyyy");return e[n]=e[n]?[].concat(Object(p.a)(e[n]),[t]):[t],e}),{}))}}]),e}(),T=function(){function e(){var t=this;Object(b.a)(this,e),this.user=null,this.login=function(){var e=Object(f.a)(g.a.mark((function e(n){var r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,L.Account.login(n);case 3:r=e.sent,N.commonStore.setToken(r.token),Object(h.h)((function(){return t.user=r})),Fe.push("/rides"),N.modalStore.closeModal(),e.next=13;break;case 10:throw e.prev=10,e.t0=e.catch(0),e.t0;case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),this.logout=function(){N.commonStore.setToken(null),N.rideStore.ridesRegistry.clear(),window.localStorage.removeItem("jwt"),t.user=null,Fe.push("/")},this.getUser=Object(f.a)(g.a.mark((function e(){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,L.Account.current();case 3:n=e.sent,Object(h.h)((function(){return t.user=n})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),this.register=function(){var e=Object(f.a)(g.a.mark((function e(n){var r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,L.Account.register(n);case 3:r=e.sent,N.commonStore.setToken(r.token),Object(h.h)((function(){return t.user=r})),Fe.push("/rides"),N.modalStore.closeModal(),e.next=13;break;case 10:throw e.prev=10,e.t0=e.catch(0),e.t0;case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),Object(h.d)(this)}return Object(x.a)(e,[{key:"isLoggedIn",get:function(){return!!this.user}}]),e}(),N={rideStore:new P,commonStore:new function e(){var t=this;Object(b.a)(this,e),this.error=null,this.token=window.localStorage.getItem("jwt"),this.appLoaded=!1,this.setServerError=function(e){t.error=e},this.setToken=function(e){t.token=e},this.setAppLoaded=function(){t.appLoaded=!0},Object(h.d)(this),Object(h.g)((function(){return t.token}),(function(e){e?window.localStorage.setItem("jwt",e):window.localStorage.removeItem("jwt")}))},userStore:new T,modalStore:new function e(){var t=this;Object(b.a)(this,e),this.modal={open:!1,body:null},this.openModal=function(e){t.modal.open=!0,t.modal.body=e},this.closeModal=function(){t.modal.open=!1,t.modal.body=null},Object(h.d)(this)}},B=Object(r.createContext)(N);function E(){return Object(r.useContext)(B)}var F=n(1);function z(){var e=E().userStore,t=e.user,n=e.logout;return Object(F.jsx)(o.a,{inverted:!0,fixed:"top",children:Object(F.jsxs)(c.a,{children:[Object(F.jsxs)(o.a.Item,{as:s.b,to:"/",exact:!0,header:!0,children:[Object(F.jsx)(d.a,{name:"car",size:"big"}),"RideRegistration"]}),Object(F.jsx)(o.a.Item,{as:s.b,to:"/rides",name:"Rides"}),Object(F.jsx)(o.a.Item,{children:Object(F.jsx)(u.a,{as:s.b,to:"/CreateRide",positive:!0,content:"Create Ride"})}),Object(F.jsxs)(o.a.Item,{position:"right",children:[Object(F.jsx)(l.a,{src:(null===t||void 0===t?void 0:t.image)||"/assets/user.png",avatar:!0,spaced:"right"}),Object(F.jsx)(j.a,{pointing:"top left",text:null===t||void 0===t?void 0:t.displayName,children:Object(F.jsx)(j.a.Menu,{children:Object(F.jsx)(j.a.Item,{onClick:n,text:"Logout",icon:"power"})})})]})]})})}var D=n(23),G=n(21),K=n(487),V=n(486),q=n(38),U=n(177),W=n(42),H=n(22),J=n(477);function Y(e){var t=Object(q.d)(e.name),n=Object(H.a)(t,2),r=n[0],i=n[1];return Object(F.jsxs)(J.a.Field,{error:i.touched&&!!i.error,children:[Object(F.jsx)("label",{children:e.label}),Object(F.jsx)("input",Object(W.a)(Object(W.a)({},r),e)),i.touched&&i.error?Object(F.jsx)(U.a,{basic:!0,color:"red",children:i.error}):null]})}var Q=Object(D.a)((function(){var e=E().userStore;return Object(F.jsx)(q.c,{initialValues:{email:"",password:"",error:null},onSubmit:function(t,n){var r=n.setErrors;return e.login(t).catch((function(e){return r({error:"Invalid email or password"})}))},children:function(e){var t=e.handleSubmit,n=e.isSubmitting,r=e.errors;return Object(F.jsxs)(q.b,{className:"ui form",onSubmit:t,autoComplete:"off",children:[Object(F.jsx)(V.a,{as:"h2",content:"Login to RideRegistration",color:"teal",textAlign:"center"}),Object(F.jsx)(Y,{name:"email",placeholder:"Email"}),Object(F.jsx)(Y,{name:"password",placeholder:"Password",type:"password"}),Object(F.jsx)(q.a,{name:"error",render:function(){return Object(F.jsx)(U.a,{style:{marginBottom:10},basic:!0,color:"red",content:r.error})}}),Object(F.jsx)(u.a,{loading:n,positive:!0,content:"Login",type:"submit",fluid:!0})]})}})})),X=n(55),Z=n(480);function $(e){var t=e.errors;return Object(F.jsx)(Z.a,{error:!0,children:t&&Object(F.jsx)(Z.a.List,{children:t.map((function(e,t){return Object(F.jsx)(Z.a.Item,{children:e},t)}))})})}var _=Object(D.a)((function(){var e=E().userStore;return Object(F.jsx)(q.c,{initialValues:{displayName:"",email:"",password:"",error:null},onSubmit:function(t,n){var r=n.setErrors;return e.register(t).catch((function(e){return r({error:e})}))},validationSchema:X.a({displayName:X.b().required(),username:X.b().required(),email:X.b().required().email(),password:X.b().required()}),children:function(e){var t=e.handleSubmit,n=e.isSubmitting,r=e.errors,i=e.isValid,a=e.dirty;return Object(F.jsxs)(q.b,{className:"ui form error",onSubmit:t,autoComplete:"off",children:[Object(F.jsx)(V.a,{as:"h2",content:"Register to Reactivities",color:"teal",textAlign:"center"}),Object(F.jsx)(Y,{name:"displayName",placeholder:"Display Name"}),Object(F.jsx)(Y,{name:"username",placeholder:"Username"}),Object(F.jsx)(Y,{name:"email",placeholder:"Email"}),Object(F.jsx)(Y,{name:"password",placeholder:"Password",type:"password"}),Object(F.jsx)(q.a,{name:"error",render:function(){return Object(F.jsx)($,{errors:r.error})}}),Object(F.jsx)(u.a,{disabled:!i||!a||n,loading:n,positive:!0,content:"Register",type:"submit",fluid:!0})]})}})})),ee=Object(D.a)((function(){var e=E(),t=e.userStore,n=e.modalStore;return Object(F.jsx)(K.a,{inverted:!0,textAlign:"center",vertical:!0,className:"masthead",children:Object(F.jsxs)(c.a,{text:!0,children:[Object(F.jsx)(V.a,{as:"h1",inverted:!0,children:Object(F.jsx)(d.a,{size:"massive",name:"car"})}),t.isLoggedIn?Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(V.a,{as:"h2",inverted:!0,content:"Welcome to RideRegistration"}),Object(F.jsx)(u.a,{as:s.a,to:"/rides",size:"huge",inverted:!0,children:"Go to Rides!"})]}):Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(V.a,{as:"h2",inverted:!0,content:"Welcome to RideRegistration"}),Object(F.jsx)(u.a,{onClick:function(){return n.openModal(Object(F.jsx)(Q,{}))},size:"huge",inverted:!0,children:"Login!"}),Object(F.jsx)(u.a,{onClick:function(){return n.openModal(Object(F.jsx)(_,{}))},size:"huge",inverted:!0,children:"Register!"})]})]})})})),te=n(255),ne=n.n(te),re=n(488),ie=n(474),ae=Object(D.a)((function(){var e=E().rideStore,t=e.setPredicate,n=e.orderByRecent;return Object(F.jsxs)(F.Fragment,{children:[Object(F.jsxs)(o.a,{vertical:!0,size:"large",style:{widht:"100%",marginTop:25},children:[Object(F.jsx)(V.a,{icon:"filter",attached:!0,color:"teal",content:"Filters"}),Object(F.jsx)(o.a.Item,{content:"recent rides first",active:!0===n,onClick:function(){t("orderByRecent")}}),Object(F.jsx)(o.a.Item,{content:"oldest rides first",active:!1===n,onClick:function(){return t("orderByOld")}})]}),Object(F.jsx)(V.a,{})]})})),ce=n(481);function se(){return Object(F.jsx)(r.Fragment,{children:Object(F.jsx)(ce.a,{fluid:!0,style:{marginTop:15},children:Object(F.jsxs)(K.a.Group,{children:[Object(F.jsx)(K.a,{style:{minHeight:50},children:Object(F.jsx)(ce.a,{children:Object(F.jsx)(ce.a.Header,{children:Object(F.jsx)(ce.a.Line,{})})})}),Object(F.jsx)(K.a,{clearing:!0,children:Object(F.jsx)(u.a,{disabled:!0,color:"blue",floated:"right",content:"View"})})]})})})}var oe=n(478);function de(e){var t=e.ride;return Object(F.jsxs)(K.a.Group,{children:[Object(F.jsx)(K.a,{children:Object(F.jsx)(oe.a.Group,{children:Object(F.jsx)(oe.a,{children:Object(F.jsx)(oe.a.Content,{children:Object(F.jsx)(oe.a.Header,{as:s.a,to:"/rides/".concat(t.id),children:Object(F.jsxs)("span",{children:[Object(F.jsx)(d.a,{name:"road"})," ride from ",t.beginAddress," to ",t.destination]})})})})})}),Object(F.jsxs)(K.a,{clearing:!0,children:[Object(F.jsxs)("span",{children:[Object(F.jsx)(d.a,{name:"clock"})," ",Object(m.default)(t.date,"dd MMM yyyy")]}),Object(F.jsx)(u.a,{as:s.a,to:"/rides/".concat(t.id),color:"teal",floated:"right",content:"View"})]})]})}var ue,le,je=Object(D.a)((function(){var e=E().rideStore.groupedRides;return Object(F.jsx)(F.Fragment,{children:e.map((function(e){var t=Object(H.a)(e,2),n=t[0],i=t[1];return Object(F.jsxs)(r.Fragment,{children:[Object(F.jsx)(V.a,{sub:!0,color:"teal",children:n}),i.map((function(e){return Object(F.jsx)(de,{ride:e},e.id)}))]},n)}))})})),be=Object(D.a)((function(){var e=E().rideStore,t=e.loadRides,n=e.ridesRegistry,i=e.setPagingParams,a=e.pagination,c=Object(r.useState)(!1),o=Object(H.a)(c,2),d=o[0],l=o[1],j=0===n.size;return Object(r.useEffect)((function(){n.size<=1&&t()}),[n.size,t]),Object(F.jsxs)(re.a,{children:[j&&!e.loadingInititial&&Object(F.jsx)(re.a.Column,{width:"16",children:Object(F.jsxs)(K.a,{children:[Object(F.jsx)("h1",{children:" You don't have any rides yet."}),Object(F.jsx)(u.a,{as:s.b,to:"/CreateRide",positive:!0,content:"Create Ride"})]})}),Object(F.jsx)(re.a.Column,{width:"10",children:e.loadingInititial&&!d?Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(se,{}),Object(F.jsx)(se,{}),Object(F.jsx)(se,{}),Object(F.jsx)(se,{}),Object(F.jsx)(se,{})]}):Object(F.jsx)(ne.a,{pageStart:0,loadMore:function(){l(!0),i(new S(a.currentPage+1)),t().then((function(){return l(!1)}))},hasMore:!d&&!!a&&a.currentPage<a.totalPages,initialLoad:!1,children:Object(F.jsx)(je,{})})}),!j&&Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(re.a.Column,{width:"6",children:Object(F.jsx)(ae,{})}),Object(F.jsx)(re.a.Column,{width:10,children:Object(F.jsx)(ie.a,{active:d})})]})]})})),he=n(88);!function(e){e.BICYCLING="BICYCLING",e.DRIVING="DRIVING",e.TRANSIT="TRANSIT",e.WALKING="WALKING"}(ue||(ue={})),function(e){e[e.IMPERIAL=0]="IMPERIAL",e[e.METRIC=1]="METRIC"}(le||(le={}));var pe=Object(D.a)((function(e){var t,n=e.ride,i=Object(r.useState)(),a=Object(H.a)(i,2),c=a[0],o=a[1],d=E().rideStore;return Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(he.e,{googleMapsApiKey:d.apiKey,children:void 0===c&&Object(F.jsx)(he.c,{options:{origins:[n.beginAddress],destinations:[n.destination],travelMode:ue.DRIVING,unitSystem:le.METRIC},callback:function(e){var t=e.rows[0].elements[0].distance.value/1e3;o(t)}})}),Object(F.jsx)(K.a.Group,{children:Object(F.jsxs)(K.a,{clearing:!0,children:[Object(F.jsx)(oe.a.Group,{children:Object(F.jsx)(oe.a,{children:Object(F.jsxs)(oe.a.Content,{children:[Object(F.jsx)(V.a,{size:"huge",content:"ride from ".concat(n.beginAddress," to ").concat(n.destination)}),Object(F.jsx)("p",{children:Object(m.default)(n.date,"dd MMM yyyy h:mm aa")}),Object(F.jsxs)("p",{children:["ride by ",Object(F.jsx)("strong",{children:null===(t=n.profile)||void 0===t?void 0:t.displayName})]}),void 0!==c&&Object(F.jsxs)("p",{children:["distance: ",c," km"]})]})})}),Object(F.jsx)(u.a,{as:s.a,to:"/manage/".concat(n.id),color:"orange",floated:"right",children:"Edit Ride"})]})})]})})),Oe={width:"100%",height:"600px"},ge={lat:52.23,lng:4.55};function fe(e){var t=e.ride,n=Object(r.useState)(),i=Object(H.a)(n,2),a=i[0],c=i[1],s=E().rideStore;return Object(F.jsx)(K.a,{children:Object(F.jsx)(he.e,{googleMapsApiKey:s.apiKey,children:Object(F.jsxs)(he.d,{mapContainerStyle:Oe,center:ge,zoom:10,children:[""!==t.destination&&""!==t.beginAddress&&void 0===a&&Object(F.jsx)(he.b,{options:{destination:t.destination,origin:t.beginAddress,travelMode:ue.DRIVING},callback:function(e){null!==e&&("OK"===e.status&&void 0===a?c(e):console.log("response: ",e))}}),void 0!==a&&Object(F.jsx)(he.a,{options:{directions:a}}),Object(F.jsx)(F.Fragment,{})]})})})}var xe=n(484);function me(e){var t=e.inverted,n=void 0===t||t,r=e.content,i=void 0===r?"Loading...":r;return Object(F.jsx)(xe.a,{active:!0,inverted:n,children:Object(F.jsx)(ie.a,{content:i})})}var ve=Object(D.a)((function(){var e=E().rideStore,t=e.selectedRide,n=e.loadRide,i=e.loadingInititial,a=e.clearSelectedRide,c=Object(G.i)().id;return Object(r.useEffect)((function(){return c&&n(c),function(){return a()}}),[c,n,a]),i||!t?Object(F.jsx)(me,{}):Object(F.jsx)(re.a,{children:Object(F.jsxs)(re.a.Column,{width:16,children:[Object(F.jsx)(pe,{ride:t}),Object(F.jsx)(fe,{ride:t})]})})})),ye=n(482),Re=n(256),we=n.n(Re);function Se(e){var t=Object(q.d)(e.name),n=Object(H.a)(t,3),r=n[0],i=n[1],a=n[2];return Object(F.jsxs)(J.a.Field,{error:i.touched&&!!i.error,children:[Object(F.jsx)(we.a,Object(W.a)(Object(W.a)(Object(W.a)({},r),e),{},{selected:r.value&&new Date(r.value)||null,onChange:function(e){return a.setValue(e)}})),i.touched&&i.error?Object(F.jsx)(U.a,{basic:!0,color:"red",children:i.error}):null]})}var Ie=Object(D.a)((function(){var e=Object(G.g)(),t=E().rideStore,n=t.createRide,i=t.updateRide,a=t.loadRide,c=t.loadingInititial,o=Object(G.i)().id,d=Object(r.useState)({id:"",beginAddress:"",destination:"",date:null,profile:null}),l=Object(H.a)(d,2),j=l[0],b=l[1],h=X.a({beginAddress:X.b().required("The beginAddress is required"),destination:X.b().required("The destination is required"),date:X.b().required("Date is required").nullable()});return Object(r.useEffect)((function(){o&&a(o).then((function(e){return b(e)}))}),[o,a]),c?Object(F.jsx)(me,{content:"loading ride..."}):Object(F.jsxs)(K.a,{clearing:!0,children:[Object(F.jsx)(V.a,{content:"Ride Details",sub:!0,color:"teal"}),Object(F.jsx)(q.c,{validationSchema:h,enableReinitialize:!0,initialValues:j,onSubmit:function(t){return function(t){if(0===t.id.length){var r=Object(W.a)(Object(W.a)({},t),{},{id:Object(ye.a)()});n(r).then((function(){return e.push("/rides/".concat(r.id))}))}else i(t).then((function(){return e.push("/rides/".concat(t.id))}))}(t)},children:function(e){var t=e.handleSubmit,n=e.isValid,r=e.isSubmitting,i=e.dirty;return Object(F.jsxs)(q.b,{className:"ui form",onSubmit:t,autoComplete:"off",children:[Object(F.jsx)(Y,{name:"beginAddress",placeholder:"BeginAddress"}),Object(F.jsx)(Y,{placeholder:"Destination",name:"destination"}),Object(F.jsx)(Se,{placeholderText:"Date",name:"date",showTimeSelect:!0,timeCaption:"time",dateFormat:"MMMM d, yyyy h:mm aa"}),Object(F.jsx)(u.a,{disabled:r||!i||!n,floated:"right",positive:!0,loading:r,type:"submit",content:"Submit"}),Object(F.jsx)(u.a,{as:s.a,to:"/rides",floated:"right",type:"button",content:"Cancel"})]})}})]})}));function ke(){return Object(F.jsxs)(K.a,{placeholder:!0,children:[Object(F.jsxs)(V.a,{icon:!0,children:[Object(F.jsx)(d.a,{name:"search"}),"Oops - we've looked everywhere and could not find this"]}),Object(F.jsx)(K.a.Inline,{children:Object(F.jsx)(u.a,{as:s.a,to:"/rides",primary:!0,children:"Return to my rides"})})]})}var Me=n(479),Ce=Object(D.a)((function(){var e=E().modalStore;return Object(F.jsx)(Me.a,{open:e.modal.open,onClose:e.closeModal,size:"mini",children:Object(F.jsx)(Me.a.Content,{children:e.modal.body})})})),Ae=n(259),Le=["component"];function Pe(e){var t=e.component,n=Object(Ae.a)(e,Le),r=E().userStore.isLoggedIn;return Object(F.jsx)(G.b,Object(W.a)(Object(W.a)({},n),{},{render:function(e){return r?Object(F.jsx)(t,Object(W.a)({},e)):Object(F.jsx)(G.a,{to:"/"})}}))}var Te=Object(D.a)((function(){var e=Object(G.h)(),t=E(),n=t.commonStore,i=t.userStore;return Object(r.useEffect)((function(){n.token?i.getUser().finally((function(){return n.setAppLoaded()})):n.setAppLoaded()}),[n,i]),n.appLoaded?Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(R.a,{position:"bottom-right",hideProgressBar:!0}),Object(F.jsx)(Ce,{}),Object(F.jsx)(G.b,{exact:!0,path:"/",component:ee}),Object(F.jsx)(G.b,{path:"/(.+)",render:function(){return Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(z,{}),Object(F.jsx)(c.a,{style:{marginTop:"7em"},children:Object(F.jsxs)(G.d,{children:[Object(F.jsx)(Pe,{exact:!0,path:"/rides",component:be}),Object(F.jsx)(Pe,{path:"/rides/:id",component:ve}),Object(F.jsx)(Pe,{path:["/createRide","/manage/:id"],component:Ie},e.key),Object(F.jsx)(G.b,{component:ke})]})})]})}})]}):Object(F.jsx)(F.Fragment,{})})),Ne=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,490)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,a=t.getLCP,c=t.getTTFB;n(e),r(e),i(e),a(e),c(e)}))},Be=n(36);function Ee(){var e=Object(G.h)().pathname;return Object(r.useEffect)((function(){window.scrollTo(0,0)}),[e]),null}var Fe=Object(Be.a)();a.a.render(Object(F.jsx)(B.Provider,{value:N,children:Object(F.jsxs)(G.c,{history:Fe,children:[Object(F.jsx)(Ee,{}),Object(F.jsx)(Te,{})]})}),document.getElementById("root")),Ne()}},[[455,1,2]]]);
//# sourceMappingURL=main.a4db970c.chunk.js.map